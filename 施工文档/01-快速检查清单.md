# âœ… å¿«é€Ÿæ£€æŸ¥æ¸…å•

> ç”¨è¿™ä¸ªæ¸…å•å¿«é€Ÿäº†è§£é¡¹ç›®å½“å‰çŠ¶æ€ï¼Œæ‰¾å‡ºå¯èƒ½çš„é—®é¢˜

---

## ğŸ”§ ç¯å¢ƒæ£€æŸ¥

- [ ] Pythonè™šæ‹Ÿç¯å¢ƒæ˜¯å¦æ¿€æ´»ï¼Ÿ
  ```bash
  which python  # åº”è¯¥æŒ‡å‘ venv ç›®å½•
  ```

- [ ] ä¾èµ–æ˜¯å¦å®‰è£…ï¼Ÿ
  ```bash
  pip list | grep -E "(fastapi|google-cloud-firestore|google-generativeai)"
  ```

- [ ] Firebaseå‡­è¯æ˜¯å¦é…ç½®ï¼Ÿ
  ```bash
  ls backend/firebase-credentials.json
  cat backend/app/config.py | grep GOOGLE_APPLICATION_CREDENTIALS
  ```

- [ ] APIå¯†é’¥æ˜¯å¦è®¾ç½®ï¼Ÿ
  ```bash
  cat backend/app/config.py | grep GEMINI_API_KEY
  ```

---

## ğŸƒ è¿è¡ŒçŠ¶æ€

- [ ] åç«¯æ˜¯å¦è¿è¡Œï¼Ÿ
  ```bash
  curl http://localhost:8000/health
  # åº”è¯¥è¿”å›: {"status":"healthy","service":"llm-hot-memory-system",...}
  ```

- [ ] å‰ç«¯æ˜¯å¦å¯è®¿é—®ï¼Ÿ
  ```bash
  curl http://localhost:8080/
  # åº”è¯¥è¿”å›HTMLå†…å®¹
  ```

- [ ] åç«¯æ—¥å¿—æ˜¯å¦æ­£å¸¸ï¼Ÿ
  ```bash
  # æ£€æŸ¥ç»ˆç«¯è¾“å‡ºï¼Œçœ‹æ˜¯å¦æœ‰ERRORæˆ–WARNING
  ```

---

## ğŸ“¦ æ ¸å¿ƒæ–‡ä»¶æ£€æŸ¥

### è·¯ç”±å±‚
- [ ] `backend/app/routers/chat.py` - å¯¹è¯æ¥å£
  - `POST /api/chat` - å‘é€æ¶ˆæ¯
  - `POST /api/sessions` - åˆ›å»ºä¼šè¯
  - `GET /api/sessions/{sid}/messages` - è·å–æ¶ˆæ¯

- [ ] `backend/app/routers/topics.py` - ä¸»é¢˜æ¥å£
  - `GET /api/sessions/{sid}/topics` - ä¸»é¢˜åˆ—è¡¨
  - `GET /api/sessions/{sid}/topics/{tid}` - ä¸»é¢˜è¯¦æƒ…

### æœåŠ¡å±‚ï¼ˆæŒ‰è°ƒç”¨é¡ºåºï¼‰
- [ ] `context_loop.py` - **æ ¸å¿ƒæœåŠ¡**ï¼Œç®¡ç†æ•´ä¸ªå¯¹è¯å¾ªç¯
- [ ] `context_builder.py` - æ„å»ºå‘é€ç»™LLMçš„ä¸Šä¸‹æ–‡
- [ ] `archive_service.py` - å½’æ¡£é€»è¾‘
- [ ] `artifact_service.py` - Artifactè§£æå’ŒæŸ¥è¯¢
- [ ] `llm_service.py` - è°ƒç”¨Gemini API
- [ ] `firestore_service.py` - æ•°æ®åº“æ“ä½œ

### é…ç½®
- [ ] `backend/app/config.py` - æ‰€æœ‰é…ç½®é¡¹

---

## ğŸ› å¸¸è§é—®é¢˜è¯Šæ–­

### é—®é¢˜1: åç«¯å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version  # åº”è¯¥ >= 3.8

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8000

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
cd backend
python -m uvicorn app.main:app --reload
```

### é—®é¢˜2: Firestoreè¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥å‡­è¯æ–‡ä»¶
cat backend/firebase-credentials.json | python -m json.tool

# æ£€æŸ¥ç¯å¢ƒå˜é‡
echo $GOOGLE_APPLICATION_CREDENTIALS

# æµ‹è¯•è¿æ¥
python -c "from google.cloud import firestore; db = firestore.Client(); print('OK')"
```

### é—®é¢˜3: LLMè°ƒç”¨å¤±è´¥
```bash
# æ£€æŸ¥APIå¯†é’¥
grep GEMINI_API_KEY backend/app/config.py

# æµ‹è¯•APIè°ƒç”¨
python -c "import google.generativeai as genai; genai.configure(api_key='YOUR_KEY'); print('OK')"
```

### é—®é¢˜4: å½’æ¡£ä¸è§¦å‘
```python
# æ£€æŸ¥é…ç½®
# backend/app/config.py
archive_threshold = 10  # æ”¹å°ä¸€ç‚¹æµ‹è¯•ï¼Œæ¯”å¦‚3

# æŸ¥çœ‹æ—¥å¿—
# åº”è¯¥çœ‹åˆ°: "Archiving triggered..."
```

### é—®é¢˜5: NEED_CONTEXTä¸å·¥ä½œ
```python
# æ£€æŸ¥é…ç½®
# backend/app/config.py
context_request_pattern = "NEED_CONTEXT:"  # ç¡®ä¿è¿™ä¸ªå­˜åœ¨
max_context_retry = 3  # ç¡®ä¿ > 0

# æŸ¥çœ‹æ—¥å¿—
# åº”è¯¥çœ‹åˆ°: "Context request detected..."
```

---

## ğŸ“Š æ•°æ®æ£€æŸ¥

### Firestoreæ•°æ®ç»“æ„éªŒè¯
```bash
# ä½¿ç”¨Firebaseæ§åˆ¶å°æˆ–è„šæœ¬æ£€æŸ¥
# 1. æ˜¯å¦æœ‰ users é›†åˆ
# 2. æ˜¯å¦æœ‰ sessions å­é›†åˆ
# 3. sessions ä¸‹æ˜¯å¦æœ‰ messages å’Œ topics å­é›†åˆ
```

### æµ‹è¯•æ•°æ®æµ
```bash
# 1. åˆ›å»ºä¼šè¯
curl -X POST http://localhost:8000/api/sessions \
  -H "Content-Type: application/json" \
  -d '{"user_id":"test_user"}'

# 2. å‘é€æ¶ˆæ¯
curl -X POST http://localhost:8000/api/chat \
  -H "Content-Type: application/json" \
  -d '{
    "user_id":"test_user",
    "session_id":"<ä¸Šä¸€æ­¥è¿”å›çš„session_id>",
    "message":"ä½ å¥½"
  }'

# 3. æŸ¥çœ‹æ¶ˆæ¯
curl http://localhost:8000/api/sessions/<session_id>/messages?user_id=test_user
```

---

## ğŸ¯ åŠŸèƒ½æµ‹è¯•æ¸…å•

- [ ] **åŸºç¡€å¯¹è¯** - èƒ½æ­£å¸¸å‘é€æ¶ˆæ¯å¹¶å¾—åˆ°å›å¤
- [ ] **ä¼šè¯ç®¡ç†** - èƒ½åˆ›å»ºå¤šä¸ªç‹¬ç«‹ä¼šè¯
- [ ] **è‡ªåŠ¨å½’æ¡£** - å‘é€10æ¡ä»¥ä¸Šæ¶ˆæ¯åè§¦å‘å½’æ¡£
- [ ] **ä¸Šä¸‹æ–‡æ£€ç´¢** - AIå›å¤åŒ…å«å†å²ä¿¡æ¯ï¼ˆæµ‹è¯•æ–¹æ³•ï¼šå…ˆèŠä¸€ä¸ªä¸»é¢˜ï¼Œå½’æ¡£åï¼Œåœ¨æ–°å¯¹è¯ä¸­è¯¢é—®è¯¥ä¸»é¢˜ï¼‰
- [ ] **ç‰ˆæœ¬ç®¡ç†** - åŒä¸€ä¸»é¢˜å¤šæ¬¡å½’æ¡£åæœ‰ç‰ˆæœ¬å†å²
- [ ] **ä¸»é¢˜åˆ—è¡¨** - èƒ½æŸ¥è¯¢æ‰€æœ‰ä¸»é¢˜
- [ ] **ä¸»é¢˜è¯¦æƒ…** - èƒ½æŸ¥çœ‹å•ä¸ªä¸»é¢˜çš„Artifactå†…å®¹

---

## ğŸ“ˆ æ€§èƒ½æ£€æŸ¥

- [ ] å•æ¬¡å¯¹è¯å“åº”æ—¶é—´ < 5ç§’
- [ ] å½’æ¡£æ“ä½œæ—¶é—´ < 10ç§’
- [ ] Firestoreè¯»å†™å»¶è¿Ÿ < 1ç§’
- [ ] å†…å­˜å ç”¨åˆç†ï¼ˆ< 500MBï¼‰

---

## ğŸ”„ æŒç»­æ”¹è¿›

### å¾…ä¼˜åŒ–é¡¹
- [ ] å‰ç«¯UIç¾åŒ–
- [ ] é”™è¯¯å¤„ç†å¢å¼º
- [ ] æ—¥å¿—æ ¼å¼ç»Ÿä¸€
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–
- [ ] æ€§èƒ½ç›‘æ§
- [ ] ç¼“å­˜æœºåˆ¶

### å·²çŸ¥é™åˆ¶
- [ ] æ²¡æœ‰ç”¨æˆ·è®¤è¯
- [ ] FirestoreæŸ¥è¯¢æœªä¼˜åŒ–ç´¢å¼•
- [ ] å‰ç«¯æ²¡æœ‰åŠ è½½çŠ¶æ€æç¤º
- [ ] æ²¡æœ‰æ¶ˆæ¯ç¼–è¾‘/åˆ é™¤åŠŸèƒ½

---

## ğŸ’¡ å¿«é€Ÿå®šä½é—®é¢˜æŠ€å·§

1. **çœ‹æ—¥å¿—** - åç«¯ç»ˆç«¯è¾“å‡ºæœ€ç›´æ¥
2. **çœ‹Network** - æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„Networkæ ‡ç­¾
3. **çœ‹æ•°æ®åº“** - Firebaseæ§åˆ¶å°æŸ¥çœ‹å®é™…æ•°æ®
4. **çœ‹é…ç½®** - `config.py` æ˜¯å¦æ­£ç¡®
5. **çœ‹ä¾èµ–** - `pip list` æ£€æŸ¥ç‰ˆæœ¬

---

**è®°ä½**: å‡ºç°é—®é¢˜æ—¶ï¼Œä»ä¸Šåˆ°ä¸‹æ£€æŸ¥è¿™ä¸ªæ¸…å•ï¼Œ90%çš„é—®é¢˜éƒ½èƒ½å¿«é€Ÿå®šä½ï¼
